(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-profile-setting-profile-setting"],{"0332":function(t,e,a){"use strict";a.r(e);var n=a("a455"),i=a("bc68");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("3391");var u,o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"a236fa4e",null,!1,n["a"],u);e["default"]=s.exports},"0ccb":function(t,e,a){var n=a("2aa6");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("0619abb4",n,!0,{sourceMap:!1,shadowMode:!1})},1285:function(t,e,a){"use strict";var n=a("4ea4");a("99af"),a("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.request=s;var i=n(a("5530")),r=a("7dbd"),u=a("b41d"),o=n(a("d58c"));function s(t){var e=t.url,a=void 0===e?"":e,n=t.data,s=void 0===n?{}:n,l=t.useSerialize,c=void 0===l||l;return c&&(s=o.default.hyphenateCopy(s)),new Promise((function(t,e){uni.request({url:"".concat(u.CONFIG.DEMAIN).concat(a),data:(0,i.default)((0,i.default)({},s),{},{token:(0,r.getCache)("token"),wxapp_id:u.CONFIG.WXAPPID}),method:"POST",success:function(e){var a=e.data;c&&(a=o.default.camelizeCopy(e.data)),t(a)},fail:function(t){e(t)}})}))}},"1af9":function(t,e,a){"use strict";a.r(e);var n=a("f4c6"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"1de5":function(t,e,a){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"1e90":function(t,e,a){"use strict";a.r(e);var n=a("4ed4"),i=a("7496");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("e493");var u,o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"1fc82562",null,!1,n["a"],u);e["default"]=s.exports},2414:function(t,e,a){t.exports=a.p+"static/img/eye1.bc3c41e7.svg"},"2aa6":function(t,e,a){var n=a("24fb"),i=a("1de5"),r=a("2414"),u=a("4ac3");e=n(!1);var o=i(r),s=i(u);e.push([t.i,'.item[data-v-a236fa4e]{width:%?604?%;display:flex;flex-wrap:wrap;justify-content:flex-start}.label[data-v-a236fa4e]{width:-webkit-fit-content;width:fit-content;color:#565d80;font-size:%?28?%;line-height:%?80?%}.desc[data-v-a236fa4e]{width:%?604?%;height:%?102?%;position:relative}.desc .input[data-v-a236fa4e]{width:100%;height:%?102?%;border:1px solid #565d80;border-radius:%?20?%;padding:0 %?80?% 0 %?20?%;outline:none;box-shadow:none}.bgeye[data-v-a236fa4e]{position:absolute;content:"";width:%?40?%;height:%?40?%;right:%?30?%;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.open[data-v-a236fa4e]{background:url('+o+") no-repeat;background-size:%?40?% %?40?%}.close[data-v-a236fa4e]{background:url("+s+") no-repeat;background-size:%?40?% %?40?%}",""]),t.exports=e},"2b19":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUser=i,e.editUser=r;var n=a("1285");function i(t){return(0,n.request)({url:"/index.php?s=/api/user/detail",data:t})}function r(t){return(0,n.request)({url:"/index.php?s=/api/user/edit",data:t})}},3391:function(t,e,a){"use strict";var n=a("0ccb"),i=a.n(n);i.a},"459f":function(t,e,a){t.exports=a.p+"static/img/add.470a353b.svg"},"4ac3":function(t,e,a){t.exports=a.p+"static/img/eye2.6d14a62e.svg"},"4ed4":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={xnButton:a("a54b").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"top-image",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadFile.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"image",attrs:{src:t.avatar||"../../static/image/default/default-avatar.jpg",mode:""}}),n("v-uni-image",{staticClass:"add",attrs:{src:a("459f"),mode:""}})],1),n("xn-input",{staticClass:"item",attrs:{label:"昵称",propName:"nickName",defaultValue:t.nickName},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)},inputBlur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}}}),n("xn-input",{staticClass:"item",attrs:{label:"邮箱",propName:"email",defaultValue:t.email},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)},inputBlur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}}}),n("xn-input",{staticClass:"item",attrs:{label:"新密码",propName:"password",defaultValue:t.password},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)},inputBlur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}}}),n("xn-input",{staticClass:"item",attrs:{label:"再次输入新密码",propName:"rPassword",defaultValue:t.rPassword},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange.apply(void 0,arguments)},inputBlur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur.apply(void 0,arguments)}}}),n("xn-button",{staticClass:"item",attrs:{text:"保存修改",size:"large"},on:{btnClick:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1)},r=[]},"5e52":function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("0332")),r=a("6b58"),u=a("2b19"),o={name:"ProfileSetting",components:{XnInput:i.default},data:function(){return{avatar:"../../static/image/default/default-avatar.jpg",nickName:"",email:"",password:"",rPassword:""}},mounted:function(){this.init()},methods:{init:function(){var t=this;(0,u.getUser)().then((function(e){var a=e||{},n=a.code,i=a.msg,u=a.data,o=void 0===u?{}:u;if(1!==n)(0,r.$toast)(i);else{var s=o.userInfo||{};t.avatar=s.avatarUrl||"",t.nickName=s.nickName||"",t.email=s.email||""}}))},uploadFile:function(){var t=this;(0,r.uploadFile)().then((function(e){Array.isArray(e)&&e.length&&(t.avatar=e[0])}))},onChange:function(t){var e=t||{},a=e.name,n=e.value;this[a]=n},onBlur:function(t){var e=t||{},a=e.name,n=e.value;(0,r.checkAndToast)(a,n)},validation:function(){if(!(0,r.checkAndToast)("name",this.nickName)||!(0,r.checkAndToast)("email",this.email))return!1;if(this.password){if(!(0,r.checkAndToast)("password",this.password)||!(0,r.checkAndToast)("password",this.rPassword))return!1;if(this.password!==this.rPassword)return(0,r.$toast)("两次输入的密码不一致"),!1}return{nickName:this.nickName,email:this.email,avatarUrl:this.avatar}},submit:function(){var t=this.validation();console.log(t),t&&(this.password&&(t.password=this.password),(0,u.editUser)({userInfo:t}).then((function(t){var e=t||{},a=e.code;e.msg,e.data;1===a?(0,r.$toast)("修改成功").then((function(){uni.switchTab({url:"/pages/profile/profile"})})):(0,r.$toast)("修改失败，请稍后再试")})))}}};e.default=o},7496:function(t,e,a){"use strict";a.r(e);var n=a("5e52"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"913f":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".btn[data-v-eef657b8]{color:#fff;border-radius:%?10?%;font-size:%?36?%;text-align:center;transition:all .2s ease-in-out}.large[data-v-eef657b8]{width:%?604?%;height:%?102?%;line-height:%?102?%}.normal[data-v-eef657b8]{width:%?292?%;height:%?102?%;line-height:%?102?%}.small[data-v-eef657b8]{width:%?100?%;height:%?20?%}.usable[data-v-eef657b8]{background-color:var(--color-tint)}.unusable[data-v-eef657b8]{background-color:#c7cad5}",""]),t.exports=e},a0b0:function(t,e,a){"use strict";a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"Input",props:{label:{type:String,default:""},placeholder:{type:String,default:""},type:{type:String,default:"text"},bgimg:{type:String,default:""},bgStatus:{type:Boolean,default:!1},propName:{type:String,default:""},defaultValue:{type:[String,Number],default:""}},data:function(){return{inputValue:""}},watch:{inputValue:function(t,e){t!==e&&this.$emit("change",{name:this.propName,value:t})},defaultValue:function(t){t&&(this.inputValue=t)}},methods:{bgClick:function(){this.$emit("bgClick")},onBlur:function(){this.$emit("inputBlur",{name:this.propName,value:this.inputValue})}}};e.default=n},a455:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"label"},[t._v(t._s(t.label))]),a("v-uni-view",{staticClass:"desc"},["checkbox"===t.type?a("v-uni-input",{staticClass:"input",attrs:{value:"",placeholder:t.placeholder,type:"checkbox"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.onBlur()}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):"radio"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"input",attrs:{value:"",placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.inputValue,"")},on:{blur:function(e){return t.onBlur()},change:function(e){t.inputValue=""}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"input",attrs:{value:"",placeholder:t.placeholder,type:t.type},domProps:{value:t.inputValue},on:{blur:function(e){return t.onBlur()},input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),a("v-uni-view",{class:{bgeye:"eye"===t.bgimg,open:t.bgStatus,close:!t.bgStatus},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.bgClick()}}})],1)],1)],1)},r=[]},a54b:function(t,e,a){"use strict";a.r(e);var n=a("b6e2"),i=a("1af9");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("de76");var u,o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"eef657b8",null,!1,n["a"],u);e["default"]=s.exports},b458:function(t,e,a){var n=a("ddf6");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("a1e22d8e",n,!0,{sourceMap:!1,shadowMode:!1})},b6e2:function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"btn",class:{large:t.isLarge,normal:t.isNormal,small:t.isSmall,usable:t.isUsable,unusable:t.isUnusable},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick()}}},[t._v(t._s(t.text))])],1)},r=[]},bc68:function(t,e,a){"use strict";a.r(e);var n=a("a0b0"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},d58c:function(t,e,a){"use strict";function n(t,e,a){var i=Object.prototype.toString.call(t),r="[object Array]"==i,u="[object Object]"==i;if(r){var o=[];return t.forEach((function(t,i){o[i]=n(t,e,a)})),o}if(u){var s={};for(var l in t){var c=e?e(l,a):l;s[c]=n(t[l],e,a)}return s}return t}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";if(!t)return"";var a=new RegExp("".concat(e,"(\\w)"),"g");return t.replace(a,(function(t,e){return e?e.toUpperCase():""}))}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";if(!t)return"";var a=/\B([A-Z])/g;return t.replace(a,"".concat(e,"$1")).toLowerCase()}function u(t,e){return n(t,i,e)}function o(t,e){return n(t,r,e)}a("4160"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={deepCopy:n,camelize:i,hyphenate:r,camelizeCopy:u,hyphenateCopy:o};e.default=s},ddf6:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".top-image[data-v-1fc82562]{width:%?160?%;height:%?160?%;border-radius:%?52?%;margin-top:%?60?%;\n\t/* overflow: hidden; */position:relative}.top-image .image[data-v-1fc82562]{width:%?160?%;height:%?160?%}.top-image .add[data-v-1fc82562]{width:%?56?%;height:%?56?%;position:absolute;top:0;right:0;-webkit-transform:translate(25%,-25%);transform:translate(25%,-25%)}.item[data-v-1fc82562]{margin-top:%?100?%}.item[data-v-1fc82562]:nth-child(n+1){margin-top:%?20?%}.item[data-v-1fc82562]:last-child{margin-top:%?50?%}",""]),t.exports=e},de76:function(t,e,a){"use strict";var n=a("e421"),i=a.n(n);i.a},e421:function(t,e,a){var n=a("913f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("02b73021",n,!0,{sourceMap:!1,shadowMode:!1})},e493:function(t,e,a){"use strict";var n=a("b458"),i=a.n(n);i.a},f4c6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"my-button",props:{text:{type:String,default:""},size:{type:String,default:"normal"},type:{type:String,default:"usable"}},computed:{isLarge:function(){return"large"===this.size},isNormal:function(){return"normal"===this.size},isSmall:function(){return"small"===this.size},isUsable:function(){return"usable"===this.type},isUnusable:function(){return"unusable"===this.type}},methods:{onClick:function(){this.$emit("btnClick")}}};e.default=n}}]);